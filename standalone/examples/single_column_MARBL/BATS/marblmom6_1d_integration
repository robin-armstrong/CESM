back=$(pwd)

cd ensemble/member_0001
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0002
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0003
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0004
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0005
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0006
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0007
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0008
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0009
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0010
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0011
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0012
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0013
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0014
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0015
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0016
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0017
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0018
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0019
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0020
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0021
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0022
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0023
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0024
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0025
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0026
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0027
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0028
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0029
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}
cd ensemble/member_0030
/glade/u/home/rarmstrong/work/cesm/cesm2_3_alpha12b+mom6_marbl/components/mom/standalone/build/intel/MOM6/MOM6 >> /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
cd ${back}

if grep -q 'ERROR' /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt; then
    rm /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
    touch .integration_failed
    exit
fi

rm /glade/scratch/rarmstrong/marbl_mom6_dart_temp/mom6_output.txt
touch .integration_complete
